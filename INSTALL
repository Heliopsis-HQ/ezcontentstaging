eZ Content Staging Extension
============================

Requirements
------------

Source server:
. eZ Publish 4.5 or later
. ggSysInfo 0.11 or later
. ezjscore (if using ezwt)

Target server:
. eZ Publish 4.5 or later
. ezprestapiprovider extension (for rest controller classes)

NB: the extension shall be installed on both servers.


Installation
------------

Target server:
. enable rewrite rules to make the rest api accessible
. disable oauth authentication

Source server:
. unzip the extension, enable it (make sure to regenerate autoloads)
. create the new db table: either go to setup/Upgrade check/DB Upgrade check in the admin interface, or use sql script in the sql/ folder
. copy the files from the patches directory over the original eZ Publish kernel files (back up original first)
. enable all the needed workflow events:
  - create one workflow per trigger for all content-related triggers:
  - add to each workflow one event of type "stage <xxx>"
  - add each workflow to one trigger
    . add location: after
	. remove location: before
	. ...
  - if you have existing workflows (eg. content approval), put the "stage" event where you deem appropriate (eg. after approval and wait-until-date events)
. define target server:
  . make sure all content classes, sections, languages, object states, are defined the same on source and target server
    (this has to be done by hand)
  . in contenstaging.ini.append.php:
    ...
  . in wsproviders.ini.append.php
    ...
. in the Administration interface, click on the "init feed" button and sync the generated event


Troubleshooting
---------------
