. fix: sending hide event sends an empty array encoded as json (same for setsection events). can we avoid this?

. fix ggws: do not try to parse response bodyes for http 204 ressponses

. look for package creation/import code for every datatype to find out where a transcoding of data is needed:
  - object relation(s), xml block, etc... -> we need to tranform object ids into their remote equivalent
  - binary datatypes -> we need better support than fromstring/tostring do natively
  - ezpage: ???

  status: export ok of object relations(s) and binary files (to be tested), import to be done for all

. add support for sending in object creation/modification requests the original timestamp and remote_id of creator user;
  - add support for importing that data into target system

. source server: when sending an event of type delete (no trash), we should also remove from local queue all pending events for the given object (and maybe warn user too before doing so)

. source server: logical bug: if local obj has been deleted (no trash) and there are pending publication events for it, we will not be able to sync them it anymore
  => warn editor (on delete or on sync?), remove pending events, what? ...

. source server: test: setsection event on a draft is registered or ignored?

. source server: test: setting a different main location not registered? also setting a different main language

. implement REST api (target-server side): realign POST/PUT usage to latest cba specs

. test delete event: how is it triggered? (a: it can be triggered even when obj still has more than 1 node attached)

. source server: finish missing events: swap, move (both source and target sides), assign object state

. source server: check changes in events definitions (either operation definition or invocation) from ezp 4.1 to 4.5
  - removelocation: checked
  - addlocation: ok
  - hide: ok
  - sort: ok
  - set section:  ok
  - update priority: ok
  - delete: ok
  - removetranslation: ok
  - updatealwaysavailable
  - updatemainassignment
  - updateinitiallanguage

. source server: finish js code used by ajax calls for ezwt (it misses checking of return value, alert, changing icon state)

. source server: proper policy checking before allowing sync calls (ok in "feed" view; remains to be seen in ezjscore call)

. source server: settle on naming conventions (user-side), rewrite all text labels in templates

. source server: settle on set of sync icons: needs to sync, is syncing, no need to sync

. settle on list of cols available in feed view and in dashboard block; make sure that it works ok for items relating to deleted nodes (showing enough info)

. source server: source server: reset all calls to ez18n to use a single namespace: "contentstating"

. produce .dba file

. source server: in wt tpl, try to filter out items in syncing status (show a different icon, do not allow to sync)

. source server: cli script that resets and initializes feeds. Also creates a publish event for all of content (same az efindexcontents)

. source server: rework dashboard block so that it lists nodes instead of sync events?
  note that we will have problems with deleted objects not being shown there

. create some documentation: a table of all events, and for each one:
  - the nodes affected (in terms of feeds that will have to be notified)
  - the nodes affected (in terms of which nodes in the ezwt toolbar should show a "sync" icon)
  - details of complex cases (where this logic is not straight)

. source server: add confirmation dialogs when deleting events / resetting feeds

. source server: allow admin user to delete events in pending status too (after confirmation dialog or via cli script)

. use the same classe to encode/decode objects on both source and target; same for attributes

. rest server: inish moving content-manipulation logic from controllers to models

. rest server: test ezp 4.6 using the 4.5 patch for ezpRestHttpRequestParser

. rest server: avoid php wwarnings generated while executing action to hit page output (use custom error handler, or what else? ... )

. rest server: fix bug: when using auto_auth filter, eZ sends 2 session cookies


Phase 2 (?)

. for ezp 4.6, add also to the media gallery (and to users?) the new subtab added to object view for admin2 design
  - also maybe add extra items to context menus?

. dependency tracking:
  - all events should not have a pending create event for any of their parents (or they cannot be synced)
  - obj relations?
  - set section: should not have a pending set section for one of its parents (nb: even for 2ndary locations? test it)
  - hide: should not have a pending set section for one of its parents

. verify events that need to happen before action: are we sure that after this event action can not be skipped (eg: because of some perms checking or some other events in chain?)
  Try to move them to "after" (eventually, patch operations: content/hide, ), or set up a two-phase logic:
  1. before action events sets up the sync-event in an "unconfirmed" state
  2. after action event moves the sync-event to "confirmed" state

. use some "struct" classes to hold data for every type of stagingevent instead of plain arrays, to make the kind of data expeted more evident


Phase 2:

. allow sync items that fail 3 consecutive sync attempts to be set to "suspended" state
. allow finer grained permissions (sync per feed)
. cronjob that passes and removes/resets sync items that have been in sync status for too long
. coalescing of sync events
. add a sync-to-localhost transport class, that copies data to separate content trees without going through rest calls
. graceful degradation: allow wt button to sync with no js available by posting to contentstaging/syncnode
. add extended attr. filter: given target feed id, get for every node the sync events pending by using aggregate sql function bit_and
. add an extra per-feed ini parameter that decides whether content creation/modification dates on targets are kept in sync with source or sync event execution date is used instead
